<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Advanced Networking - Module 3 Chapter 9 - IOS Images and Licensing</title>

		<meta name="description" content="Abilitante alle certificazioni Cisco CCENT e CCNA">
		<meta name="author" content="Hacklab Cosenza">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Advanced Networking</h1>
					<h2>Routing & Switching:<h2>
					<h2>Scaling Networks</h2>
					<h3>Chapter 9: IOS Images and Licensing</h3>
					<p>
						<small><a href="http://hlcs.it">Hacklab Cosenza</a> / Centro di Ricerca su Tecnologia e Innovazione</small>
					</p>
				</section>

				<section>
					<h2>Cisco IOS Families and Trains</h2>
					<p>Cisco IOS is the network operating system for almost all Cisco's networking devices. These hardware platforms enjoy the support of a <strong>family of software releases</strong> in their lifespan.</p>
					<p>The various versions (12.3, 12.4, 15.0, 15.1, etc.) of Cisco IOS releases represent the <strong>advancement of the IOS codebase</strong> as a whole.</p>
					<p>IOS releases <strong>overlaps in terms of support</strong>: some time before a IOS version goes <strong>EOL</strong> (<em>end of life</em>), one or more <strong>new versions are introduced and supported</strong>.</p>
					<p>Whithin each IOS release, <strong>new features will be implemented and bugs fixed</strong>. All this new code is not immediately included in the main code base, but is rather <em>branched out</em> in a "version of the version" called <em><strong>train</strong></em>.</p>
				</section>

				<section>
					<h2>Cisco IOS 12.x Trains</h2>
					<p><stron><em>Trains</em></stron> are used in IOS releases to identify and deliver a specific set of new features and bug fixes.</p>
					<p>There can be multiple trains currently active, but we will focus on the <em>Mainline</em> (<strong>M train</strong>) and <em>Technology</em> (<strong>T train</strong>).</p>
					<ul>
						<li>The <strong>M train</strong> is intended to be the <strong>most mature release</strong> Cisco can offer, and its <u>feature set never expands</u> during its lifetime. <u>Updates are released only to address bugs</u>.</li>
						<li>The <strong>T train</strong>, gets <u>new features and bug fixes</u> (in sync with the M train) throughout its life, and is therefore <u>potentially less stable</u> than the mainline. At some point <u>the current T train release becomes the foundation for the next Mainline release</u>.</li>
						<li>M train releases are also dubbed as <em>Maintenance Deployment</em> (MD) releases, as opposed to <em>Early Deployments</em> (ED) T train releases.</li>
					</ul>
				</section>

				<section>
					<h2>Cisco IOS 12.x Trains</h2>
					<img src="http://i.imgur.com/7sL20CL.png">
					<img src="http://i.imgur.com/4iYrQC0.jpg">
				</section>

				<section>
					<section>
						<h2>Cisco IOS 12.x Versioning</h2>
						<ul>
							<li>Mainline Train example: <strong>12.4(21a)</strong></li>
							<ul>
								<li><strong>12</strong> - Major version</li>
								<li><strong>4</strong> - Minor version</li>
								<li><strong>21</strong> - Maintenance Identifier</li>
								<li><strong>a</strong> - Rebuild Identifier</li>
							</ul>
							<li>Technology Train example: <strong>12.4(20)T3</strong></li>
							<ul>
								<li><strong>12</strong> - Major version</li>
								<li><strong>4</strong> - Minor version</li>
								<li><strong>20</strong> - Maintenance Identifier</li>
								<li><strong>T</strong> - Train Identifier</li>
								<li><strong>3</strong> - Rebuild Identifier</li>
							</ul>
						</ul>
						<p>The <strong>parenthesis are an obsolete notation</strong> and the aforementioned releases are also known as Cisco IOS 12.4.21a and 12.4.20T3, respectively.</p>
					</section>
					<section>
						<h2>Cisco IOS 12.x Versioning</h2>
						<p>All the <strong>numbers and identifiers in Cisco IOS versioning are shared</strong> across all trains. They increase as IOS develops, regardless of the train the IOS release will belong to.</p>
						<p><strong><em>Rebuilds</em></strong> are IOS releases that are almost identical to the previous one and <u>only</u> focus on rapidly fixing a small number of important bugs (called <em>caveats</em> by Cisco).</p>
						<p>Rebuilds are the releases containing the smaller changes, so <strong>they can be deployed by administrators right away</strong> with no need for deeper analysis.</p>
					</section>
				</section>

				<section>
					<h2>Cisco IOS 12.x Feature Set</h2>
					<img src="http://i.imgur.com/BNcXC3n.jpg">
					<p><small><strong>Note</strong>: SSH available in every 12.4 image.</small></p>
					<p>For the IOS 12.3 and 12.4 releases, <u>8 images were available</u>, each with a different set of features. 3 of these were deemed <em>premium packages</em> by Cisco.</p>
				</section>

				<section>
					<section>
						<h2>Cisco IOS 15 Trains</h2>
						<p>Cisco IOS 12.4.24T was the last IOS 12 release. 13 and 14 were skipped, and <strong>Cisco IOS 15.0 was introduced</strong>.</p>
						<p>For IOS 15, Cisco rethought the IOS release process to achieve:</p>
						<ul>
							<li>A more predictable schedule.</li>
							<li>Simplified versioning.</li>
							<li>Clearer guidelines for deploying, maintaining and upgrading.</li>
						</ul>
					</section>
					<section>
						<h2>Cisco IOS 15 Trains</h2>
						<img src="http://i.imgur.com/x3aazdW.jpg">
						<ul>
							<li>There is now a <u>single train</u>, the <strong>M/T train</strong>.</li>
							<li>M (<em>Extended Maintenance</em>) releases are <u>16-20 months apart</u>.</li>
							<li>An <u>M-release will include all the features and hardware support developed through the T-releases</u> (<em>Standard Maintenance</em>) during that 20-month timeframe.</li>
							<li>Between M-releases there are <u>2-3 T-releases per year</u>.</li>
							<li>After its release, <u>an M-release only receive bug fixes</u> and the development of new functionality starts over in the next T-release.</li>
						</ul>
					</section>
				</section>

				<section>
					<h2>Cisco IOS 15 Versioning</h2>
					<ul>
						<li>Example: <strong>Cisco IOS 15.0(1)M1</strong> and <strong>Cisco IOS 15.1(3)T1</strong></li>
						<ul>
							<li><strong>15.0/15.1</strong> -  Major.Minor release numbers</li>
							<li><strong>1/3</strong> - New Feature release number.</li>
							<li><strong>M/T</strong> - Extended or Standard Maintenance.</li>
							<li><strong>1/1</strong> - Rebuild Number</li>
						</ul>
						<li>(M) - <u>Based on the last T-release</u>, version has the feature release number bumped.</li>
						<li>(M) - After release, <u>they remain stable and supported for an extended period</u> (about 4 years) only receiving bugfixes, identified by increasing rebuild numbers.</li>
						<li>(T) - They are <u>used between M releases to develop and perfect new features</u> and hardware support.</li>
						<li>(T) - After an M-release, <u>the next T-release has its minor release number bumped</u>.</li>
					</ul>
				</section>

				<section>
					<h2>Cisco IOS 15 Feature Set</h2>
					<p>With IOS 15, Cisco has greatly <strong>simplified the process of choosing and acquiring a license</strong>.</p>
					<ul>
						<li><strong>Feature sets have been consolidated</strong> and reduced to 4.</li>
						<p><img src="http://i.imgur.com/TCGYlxZ.jpg"></p>
						<li>There is now a single, <strong><em>universal</em></strong> image/binary file for Cisco IOS that <strong>contains every feature</strong>.</li>
						<li>The chosen feature set is <strong>activated though licensing</strong>, installing a license file provided by Cisco after purchasing the license. There is no need to install a different image.</li>
					</ul>
				</section>

				<section>
					<section>
						<h2>Cisco IOS 12.x Image Files</h2>
						<ul>
							<li>Example: <strong>c2800nm-advipservicesk9-mz.124-6.T.bin</strong></li>
							<li>Use <code>show flash</code> command to view image filename on most Cisco devices.</li>
							<ul>
								<li><strong>c2800nm</strong> - The <u>hardware</u> this image can run on.</li>
								<li><strong>advipservicesk9</strong> - The <u>feature set</u> the image provides.</li>
								<li><strong>mz</strong> - If present, it indicates <u>memory location</u> and <u>compression format</u>.</li>
								<ul>
									<li>f = run from flash; m = from RAM; r = from ROM; l = relocatable; z = ZIP compressed; x = MZIP compressed.</li>
									<li>Note: Images are <strong>automatically unzipped</strong> before being loaded into run.</li>
								</ul>
								<li><strong>124-6.T</strong> - IOS release <u>version</u>.</li>
								<li><strong>bin</strong> - <u>File extension</u>, indicating this is an executable file.</li>
							</ul>
						</ul>
					</section>
					<section>
						<h2>Cisco IOS 15.x Image Files</h2>
						<ul>
							<li>Example: <strong>c1900-universalk9-mz.SPA.152-4.M3.bin</strong></li>
							<li>Use <code>show flash</code> command to view image filename on most Cisco devices.</li>
							<ul>
								<li><strong>c1900</strong> - The <u>hardware platform</u> this image can run on.</li>
								<li><strong>universalk9</strong> - <u>Image designation</u>. This is a universal image, and feature set are controlled through licenses.</li>
								<ul>
									<li><strong>universalk9_npe</strong> - A variant of the universal image that is compiled <u>without strong encryption features</u> to comply with import/export laws in certain countries.</li>
								</ul>
								<li><strong>mz</strong> - <u>Memory location</u> and <u>compression format</u>.</li>
								<li><strong>SPA</strong> - This means that the <u>image is digitally signed</u> by Cisco.</li>
								<li><strong>152-4.M3</strong> - The <u>IOS release contained</u> by the image.</li>
								<li><strong>bin</strong> - File <u>extension</u>.</li>
							</ul>
						</ul>
					</section>
				</section>

				<section>
					<h2>Managing IOS Images</h2>
					<p>In large networks, it could be useful to deploy a <strong>TFT Server to store every IOS image and configuration files</strong>.</p>
					<p>The server can be <strong>used for backup</strong>, in the event an image file on a flash card is corrupted or configuration is lost.</p>
					<p>Also, devices can be configured to <strong>boot searching the IOS on a TFTP server</strong>: <em>one image to boot them all...</em></p>
					<p>After <strong>verifying connectivity</strong> (<code>ping</code>) to the TFTP server and/or ensuring the flash card has <strong>sufficient space</strong> to store the image (<code>show flash</code>), it can be copied to/from the server with the following commands:</p>
					<ul>
						<li><code>copy flash: tftp:</code></li>
						<li><code>copy tftp: flash:</code></li>
					</ul>
				</section>

				<section>
					<h2>System Boot</h2>
					<p>The <strong>bootstrap of a Cisco devices search <code>boot system</code> commands in the startup configuration to decide which IOS image to load</strong>.</p>
					<p>This means that <u>after copying a new image onto the flash, to boot it the device needs to be configured</u> to do so.</p>
					<p><strong>Multiple <code>boot system</code> commands can be entered</strong>, so that if the first image fails to be loaded, the second one can be tried until a successful boot is achieved.</p>
					<pre><code class="no-highlight">Router# configure terminal
Router(config)# boot system flash0://[image file]
Router(config)# boot system tftp://[image file]
Router(config)# exit
Router# copy running-config startup-config
Router# reload</code></pre>
				</section>

				<section>
					<section>
						<h2>Cisco Licensing Process</h2>
						<p>New Cisco devices ship <strong>the same universal images pre-installed.</strong> The available feature sets (<em>technology packages</em>) for Cisco IOS 15 are <strong>IP Base, Data, Unified Communications (UC), Security (SEC)</strong>.</p>
						<p>Every package is <strong>activated only after purchasing and installing a license</strong>.</p>
						<p><u>When purchasing a device, choosing a feature set is mandatory</u>, so the devices can be <strong>shipped with the corrisponding licenses pre-installed and activated</strong>.</p>
					</section>
					<section>
						<h2>Cisco Licensing Process</h2>
						<ol start="1">
							<li><strong>Buy a package or feature set</strong></li>
							<ul>
								<li>After the purchase, the customer receives from Cisco a <em>Product Activation Key</em> (PAK), an 11-digit alphanumeric key that is <strong>valid as recept and is used to obtain the license</strong>.</li>
								<li>PAK is tied to a specific package and can generate the purchased number of license, but <strong>it's till not tied to a specific device</strong>.</li>
							</ul>
						</ol>
					</section>
					<section>
						<h2>Cisco Licensing Process</h2>
						<ol start="2">
							<li><strong>Obtain the corresponding license</strong></li>
							<ul>
								<li>This step involves acquiring a <em>Software Activation License</em>, which comes <strong>in the form of a file</strong>. This can be done through:</li>
								<ul>
									<li><strong>Cisco License Manager (CLM)</strong> - A standalone, freeware application that is able to <strong>generate and centrally manage license for multiple devices</strong> in a network.</li>
									<li><strong>Cisco License Registration Portal</strong> - A web site for <strong>registering licenses on an individual basis</strong>.</li>
								</ul>
								<li>For both, an <em>Unique Device Identifier</em>(UDI) is required together with a PAK to <strong>tie the license to a specific device</strong>. <small>UDI is a combination of the <em>Product ID</em> (PID, a number identifying the type of the device), the Serial Number (SN, unique to the device) and the hardware revision.</small></li>
								<li>UDI can be found with the <code>show license udi</code> command or by the <strong>pull-out label</strong> on the device itself.</li>
								<li>The license (XML, .lic) file will be <strong>sent by email</strong>.</li>
							</ul>
						</ol>
					</section>
					<section>
						<h2>Cisco Licensing Process</h2>
						<ol start="3">
							<li><strong>Installing the License</strong></li>
							<ul>
								<li>The steps to install a <strong>permanent license</strong> (which will <u>never expire for the lifetime of the device</u>) are:
								<pre><code class="no-highlight">Router# license install flash0:seck9-C1900-SPE150_K9-FAB12340099.xml
Installing licenses from “seck9-C1900-SPE150_K9-FAB12340099.xml"
Installing...Feature:seck9...Successful:Supported
1/1 licenses were successfully installed
0/1 licenses were existing licenses
0/1 licenses were failed to install
Router#
*May 18 19:24:57.391: %LICENSE-6-INSTALL: Feature seck9 1.0 was installed in this
device.
UDI=1900-SPE150/K9:FAB12340099; StoreIndex=15:Primary License Storage
*May 28 19:24:57.615: %IOS_LICENSE_IMAGE_APPLICATION-6-LICENSE_LEVEL: Module
name = c1900
Next reboot level = seck9 and License = seck9
R2# reload</code></pre>
								<li>The steps <strong>don't need to be repeated after upgrading</strong> the IOS release.</li>
							</ul>
						</ol>
					</section>
				</section>

				<section>
					<section>
						<h2>License Management</h2>
						<p>Licenses can be <strong>permanent or evaluation</strong>. To display license status of each technology package (mind their names, they are use in licensing commands):</p>
						<pre><code class="no-highlight">Router# show license
Index 1 Feature: ipbasek9
        Period left: Life time
        License Type: Permanent
        License State: Active, In Use
        License Count: Non-Counted
        License Priority: Medium
Index 2 Feature: securityk9
        Period left: Not Activated
        Period Used: 0 minute 0 second
        License Type: EvalRightToUse
        License State: Not in Use, EULA not accepted
        License Count: Non-Counted
        License Priority: None
Index 3 Feature: datak9
        Period left: 8 weeks 4 days
        Period Used: 0 minute 0 second
        License Type: EvalRightToUse
        License State: Active, Not in Use, EULA accepted
        License Count: Non-Counted
        License Priority: Low
Index 4 Feature: SSL_VPN
        Period left: Not Activated
        Period Used: 0 minute 0 second</code></pre>
					</section>
					<section>
						<h2>Evaluation Licenses</h2>
						<p>Evaluation licenses and their successors, <strong>Evaluation Right-to-use (RTU)</strong> licenses allows customers to try certain features for a specified amount of time (typically 60 days).</p>
						<p>To accept an evaluation license for a technology package:</p>
					<pre><code class="no-highlight">Router# license boot module {module_name} technology-package {package_name}
Router# reload</code></pre>
						<p>To avoid having to accept the EULA of a license prior to activating it (useful for <strong>automated licensing</strong>), use:</p>
						<pre><code class="no-highlight">Router(config)# license accept end user agreement</code></pre>
						<p>To <strong>backupall licenses</strong> for a device:</p>
						<pre><code class="no-highlight">Router# license save {file-sys://license_file.lic}</code></pre>
						<p>Later they can be <strong>restored in one go</strong> with the <code>license install</code> command.</p>
					</section>
					<section>
						<h2>Uninstalling Licenses</h2>
						<pre><code class="no-highlight">Router(config)# license boot module [name] technology-package [package] disable
Router(config)# exit
Router# reload

[Simulated reload]

Router# license clear [package]
Router# configure terminal
Router(config)# no license boot module [name] technology-package [package] disable
Router(config)# exit
Router# reload</code></pre>
					</section>
				</section>

				<section>
					<h1>End of Lesson</h1>
				</section>

				<section>
					<h2>Linkography</h2>
					<ul>
						<li><a href="http://www.cisco.com/c/en/us/products/collateral/ios-nx-os-software/ios-software-releases-12-4-mainline/whitepaper_C11-719867.html">Cisco IOS Software Reference Guide</a> @ Cisco.com</li>
						<li><a href="http://www.cisco.com/c/en/us/products/collateral/ios-nx-os-software/ios-software-release-15-0-1-m/qa_c67_561940.html">Cisco IOS Software Release 15 M and T Q&amp;A</a> @ Cisco.com</li>
						<li><a href="http://packetlife.net/media/library/21/Cisco_IOS_Versions.pdf">Cisco IOS versions cheat sheet</a> @ Packet Life</li>
					</ul>
				</section>
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'linear', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
